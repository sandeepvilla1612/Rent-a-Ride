FROM node:18-alpine

WORKDIR /app

# Copy backend dependencies file
COPY backend/package.json backend/package-lock.json ./

# Install only production dependencies
RUN npm install --omit=dev

# Copy the rest of the backend source code
COPY backend/ ./

ENV NODE_ENV=production
ENV PORT=5000
EXPOSE 5000

CMD ["npm", "start"]
